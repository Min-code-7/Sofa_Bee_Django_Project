<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Management</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        th, td {
            text-align: center;
            vertical-align: middle;
            padding: 8px;
            border: 1px solid #ddd;
        }

        .no-border-right {
            border-right: none !important;
        }

        .no-border-left {
            border-left: none !important;
        }

    </style>
</head>
<body>

<div class="container" style="padding-top: 150px">
    <div class="row mb-4">
        <div class="col-md-7" >
            <form class="form-inline" method="get" action="{% url 'history_order' id=id %}" >
                <input class="form-control mr-sm-2" type="search" name="q" placeholder="input order id to search"
                       aria-label="Search">
                <div style="padding-top:20px;"></div>
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">search</button>
            </form>
        </div>
    </div>
    <div class="bd-example">
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th scope="col" style="width: 30%">order</th>
                <th scope="col" style="width: 10%">shop name</th>
                <th scope="col" style="width: 10%">pay time</th>
                <th scope="col" style="width: 10%">unit price</th>
                <th scope="col" style="width: 10%">quantity</th>
                <th scope="col" style="width: 10%">total pay</th>
                <th scope="col" style="width: 10%">order status</th>
                <th scope="col" style="width: 10%">review</th>
            </tr>
            </thead>
        </table>
    </div>

    {% for order in orders %}
        <div class="card border-primary m-3">
            <div class="table-responsive-sm">
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col" style="width: 30%" class="no-border-right no-border-left">
                            <span>订单号：</span>{{ order.order_id }}</th>
                        <th scope="col" style="width:10%" class="no-border-right no-border-left"></th>
                        <th scope="col" style="width:10%" class="no-border-right no-border-left"></th>
                        <th scope="col" style="width:10%" class="no-border-right no-border-left"></th>
                        <th scope="col" style="width:10%" class="no-border-right no-border-left"></th>
                        <th scope="col" style="width:10%" class="no-border-right no-border-left"></th>
                        <th scope="col" style="width:10%" class="no-border-right no-border-left"></th>
                        <th scope="col" style="width:10%" class="no-border-right no-border-left"></th>

                        <th scope="col" style="width:10%" class="no-border-right no-border-left">
                            <button type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                    <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/>
                                </svg>
                            </button>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for detail in order.details %}
                        <tr>
                            <td style="width: 30%">
                                <img style="width: 80px; height: 80px;" src="{{ detail.image }}">
                                <span>{{ detail.product_name }}</span>
                            </td>
                            <td class="td_items"> {{ detail.shop_name }}</td>
                            <td class="td_items">{{ order.order_time }}</td>
                            <td class="td_items">{{ detail.item_price }}</td>
                            <td class="td_items">{{ detail.item_quantity }}</td>
                            <td class="td_items">{{ detail.price }}</td>
                            {% if forloop.first %}
                                <td rowspan="{{ order_items|length }}">{{ order.order_status }}</td>
                                <td class="td_items" rowspan="{{ order_items|length }}">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#">评价</a></li>
                                            <li class="breadcrumb-item"><a
                                                    href="{% url 'order_detail' id=id %}">详情</a></li>
                                        </ol>
                                    </nav>
                                </td>
                            {% endif %}


                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    {% endfor %}

</div>


</body>
</html>